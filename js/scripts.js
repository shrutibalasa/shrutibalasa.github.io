"use strict";function asyncGeneratorStep(e,t,r,n,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,a)}function _asyncToGenerator(i){return function(){var e=this,c=arguments;return new Promise(function(t,r){var n=i.apply(e,c);function a(e){asyncGeneratorStep(n,t,r,a,o,"next",e)}function o(e){asyncGeneratorStep(n,t,r,a,o,"throw",e)}a(void 0)})}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}for(var apiUrl="http://localhost:3000/api/teddies",currencySymbol="&euro;",categoryLinks=document.getElementsByClassName("category-link"),i=0;i<3;i++)categoryLinks[i].addEventListener("mouseover",function(){document.querySelector(".category-active").classList.remove("category-active"),this.parentNode.classList.add("category-active")},!1);var cartCountDisplay=document.querySelector(".cart-count");localStorage.cartCount&&0!=localStorage.cartCount&&(cartCountDisplay.style.display="inline-block",cartCountDisplay.textContent=localStorage.cartCount);var getQueryStringParameters=function(e){var t="";return e?0<e.split("?").length&&(t=e.split("?")[1]):(e=window.location.href,t=window.location.search.substring(1)),(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce(function(e,t){var r=_slicedToArray(t.split("="),2),n=r[0],a=r[1];return e[n]=a?decodeURIComponent(a.replace(/\+/g," ")):"",e},{})};function makeRequest(n,a,o){return new Promise(function(e,t){var r=new XMLHttpRequest;r.open(n,a),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||201===r.status?e(JSON.parse(r.response)):t(JSON.parse(r.response)))},"POST"==n?(r.setRequestHeader("Content-Type","application/json"),r.send(o)):r.send()})}function showAllProducts(){return _showAllProducts.apply(this,arguments)}function _showAllProducts(){return(_showAllProducts=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n,a,o,c,i,s,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=makeRequest("GET",apiUrl),e.next=3,t;case 3:for(r=e.sent,n=document.querySelector(".loading"),(a=n.parentNode).innerHTML="",o=0;o<r.length;o++)(c=document.createElement("div")).classList.add("item-img"),c.style.backgroundImage="url('"+r[o].imageUrl+"')",(i=document.createElement("div")).classList.add("item-name"),i.textContent=r[o].name,(s=document.createElement("div")).classList.add("item-price"),s.innerHTML=currencySymbol+r[o].price,(l=document.createElement("a")).href="product.html?id="+r[o]._id,l.classList.add("item-div"),l.classList.add("clearfix"),l.appendChild(c),l.appendChild(i),l.appendChild(s),(d=document.createElement("div")).classList.add("col-lg-4"),d.classList.add("col-md-6"),d.appendChild(l),a.appendChild(d);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function getProduct(e){return _getProduct.apply(this,arguments)}function _getProduct(){return(_getProduct=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,a,o,c,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=makeRequest("GET",apiUrl+"/"+t),e.next=3,r;case 3:for(n=e.sent,document.querySelector(".item-img-lg").src=n.imageUrl,document.querySelector("h2").textContent=n.name,document.querySelector("h4").innerHTML=currencySymbol+n.price,document.querySelector(".item-code").textContent=t,document.querySelector(".item-desc").innerHTML=n.description,a=document.querySelector(".item-select"),o=n.colors,c=0;c<o.length;c++)(i=document.createElement("option")).value=o[c],i.textContent=o[c],a.appendChild(i);document.querySelector(".product-container").style.visibility="visible";case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function disableCartButton(){var e=document.querySelector(".btn-add-to-cart");e.textContent="Added to cart",e.classList.remove("btn-dark"),e.classList.add("btn-light"),e.disabled="disabled",document.querySelector(".added-to-cart-display").style.display="block"}function enableCartButton(){var e=document.querySelector(".btn-add-to-cart");e.innerHTML="<i class='fa fa-plus'></i> Add to cart",e.classList.add("btn-dark"),e.classList.remove("btn-light"),e.removeAttribute("disabled"),document.querySelector(".added-to-cart-display").style.display="none"}function checkProductInCart(e){localStorage.cartItems&&JSON.parse(localStorage.cartItems,!0).includes(e)&&(disableCartButton(),document.querySelector(".remove-from-cart").style.display="inline-block")}function getArrayOfProductIds(){if(!localStorage.cartItems)return null;try{return JSON.parse(localStorage.cartItems,!0)}catch(e){return null}}function displayCartSummary(e){e&&0!=e.length?(populateCart(),document.querySelector(".cart-div").style.display="flex"):document.querySelector(".empty-cart-div").style.display="flex"}function populateCart(){return _populateCart.apply(this,arguments)}function _populateCart(){return(_populateCart=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n,a,o,c,i,s,l,d,u,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t=0;case 2:if(r<itemsArray.length)return n=itemsArray[r],a=makeRequest("GET",apiUrl+"/"+n),e.next=7,a;e.next=40;break;case 7:o=e.sent,(c=document.createElement("img")).src=o.imageUrl,c.classList.add("cart-summary-image"),(i=document.createElement("a")).href="product.html?id="+n,i.appendChild(c),(s=document.createElement("div")).classList.add("cart-summary-name"),s.innerHTML="<strong>"+o.name+"</strong>",(l=document.createElement("div")).classList.add("small"),l.textContent="Handmade Teddy Bears",(d=document.createElement("div")).classList.add("col-auto"),d.appendChild(i),d.appendChild(s),d.appendChild(l),(u=document.createElement("div")).classList.add("col-auto"),u.classList.add("ml-auto"),u.innerHTML=currencySymbol+o.price,(m=document.createElement("div")).classList.add("row"),m.classList.add("mb-3"),m.appendChild(d),m.appendChild(u),document.querySelector(".cart-summary-products").appendChild(m),t+=o.price;case 37:r++,e.next=2;break;case 40:document.querySelector(".grand-total").innerHTML=currencySymbol+t,localStorage.grandTotal=t;case 43:case"end":return e.stop()}},e)}))).apply(this,arguments)}function processOrder(e){return _processOrder.apply(this,arguments)}function _processOrder(){return(_processOrder=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=makeRequest("POST",apiUrl+"/order",t),e.next=3,r;case 3:(n=e.sent).orderId?window.location.href="order-confirmation.html?orderId="+n.orderId:window.location.href="order-confirmation.html";case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function emptyShoppingCart(){localStorage.removeItem("cartCount"),localStorage.removeItem("cartItems");var e=document.querySelector(".cart-count");e.textContent=0,e.style.display="none"}